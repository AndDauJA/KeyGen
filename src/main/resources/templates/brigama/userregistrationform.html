<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      lang="lt">

<head th:replace="~{fragments/regformlayout::headregform('Naujo kleinto registracijos forma')}">

</head>

<body>
<div class="body-background">
    <header>
        <nav th:replace="~{fragments/regformlayout::navigational-bar}">placeholder</nav>
    </header>

    <div class="main-reg-container">
        <h2 class="main-reg-h2">Naujo kleinto registracijos forma</h2>
        <div th:if="${message ne null and message.length() > 0}"
             class="alert alert-success" role="alert"
             th:text="${message}">
            Success message when add product
        </div>
        <form class="form-reg reg-form-text-size" method="post" th:action="@{/userregistrationform}" th:object="${clientDto}">
            <label for="user" th:text="#{reg.form.username}">User Name:</label>
            <input type="text" id="user"
                   name="userName"
                   placeholder="Enter your username" th:field="*{userName}">
            <span style="color: #f44336" class="form-error" th:if="${#fields.hasErrors('userName')}"
                  th:errors="*{userName}">
            </span>

            <label for="first" th:text="#{reg.form.firstName}">First Name:</label>
            <input type="text" id="first"
                   name="firstName"
                   placeholder="Enter your first name" th:field="*{firstName}">
            <span style="color: #f44336" class="form-error" th:if="${#fields.hasErrors('firstName')}"
                  th:errors="*{firstName}">
            </span>

            <label for="last" th:text="#{reg.form.lastName}">Last Name:</label>
            <input type="text" id="last"
                   name="lastName"
                   placeholder="Enter your last name" th:field="*{lastName}">
            <span style="color: #f44336" class="form-error" th:if="${#fields.hasErrors('lastName')}"
                  th:errors="*{lastName}"></span>

            <label for="middle" th:text="#{acc.form.middleName}">Middle Name:</label>
            <input type="text" id="middle"
                   name="middleName"
                   placeholder="Enter your middle name" th:field="*{middleName}">

            <label for="post" th:text="#{acc.form.postaddress}">Post address:</label>
            <input type="text" id="post"
                   name="postAddress"
                   placeholder="Enter your post address" th:field="*{postAddres}">

            <label for="email" th:text="#{reg.form.email}">Email:</label>
            <input type="email" id="email"
                   name="emailAddress"
                   placeholder="Enter your email" th:field="*{emailAddress}">
            <span style="color: #f44336" class="form-error" th:if="${#fields.hasErrors('emailAddress')}"
                  th:errors="*{emailAddress}"></span>
            <div th:if="${duplicateEmailMessage != null}" class="alert alert-danger" role="alert">
                <p th:text="${duplicateEmailMessage}"></p>
            </div>


            <label for="password" th:text="#{reg.form.password}">:</label>
            <input type="password" id="password"
                   name="password"
                   placeholder="Enter your password" th:field="*{password}">
            <span style="color: #f44336" class="form-error" th:if="${#fields.hasErrors('password')}"
                  th:errors="*{password}"></span>

            <label for="repeatpassword" th:text="#{reg.form.repeat.password}"></label>
            <input type="password" id="repeatpassword"
                   name="repeatpassword"
                   placeholder="Reenter your password " th:field="*{repeatPassword}">
            <span style="color: #f44336" class="form-error" th:if="${#fields.hasErrors('global')}"
                  th:errors="global"></span>
            <label for="dob" th:text="#{acc.form.dateofbirth}">Date of Birth:</label>
            <input type="date"
                   id="dob" name="dob"
                   placeholder="Enter your DOB" th:field="*{dateofbirth}">

            <label for="mobile" th:text="#{reg.form.phone}">Contact:</label>
            <input type="text" id="mobile"
                   name="mobile"
                   placeholder="Enter your Mobile Number" th:field="*{phoneNumber}"
                   maxlength="15">
            <span style="color: #f44336" class="form-error" th:if="${#fields.hasErrors('phoneNumber')}"
                  th:errors="*{phoneNumber}"></span>

            <label for="gender" th:text="#{acc.form.gender}">Gender:</label>
            <select id="gender" name="gender" th:field="*{gender}" required>
                <option value="male">Male</option>
                <option value="female">Female</option>
                <option value="other">Other</option>
            </select>
            <button class=" button-text text-center reg-form-btn" type="submit" onclick="solve()" th:text="#{reg.form.btn}">
                Submit
            </button>
        </form>
    </div>

</div>
<input type="hidden" id="serverErrorMessage" th:value="${session.errorMessage}"/>
<footer th:replace="~{fragments/layout :: footer}">placeholder</footer>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        var lang = new URLSearchParams(window.location.search).get('lang'); // Gaunama 'lang' reikšmė iš URL
        if (lang) {
            document.querySelector('.selectpicker').value = lang; // Nustatoma pasirinkimo elemento reikšmė
        }
    });
    document.addEventListener('DOMContentLoaded', function () {
        var errorMessage = document.getElementById('serverErrorMessage').value;
        if (errorMessage) {
            customAlert(errorMessage);
        }
    });
</script>
</body>
</html>