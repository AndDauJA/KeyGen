<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      lang="en">

<head th:replace="~{fragments/loginlayout::headlogin('Logind to User account')}">
</head>
<body>
<div class="body-background">
    <header>
        <nav th:replace="~{fragments/loginlayout::navigational-bar}">placeholder</nav>
    </header>
    <form method="post" class="login-form-container login-form-text-size" id="loginForm" action="/sendLogin"
          th:action="@{/login}">
        <div>
            <div class="imgcontainer ">
                <img id="body-img-logo" src="/images/3786012.jpg" alt="">
                <h1 id="comany-name" class="text-with-thick-border">UAB BRIGAMA</h1>
            </div>
        </div>
        <div class="container  ">
            <label th:text="#{login.username}"></label>
            <input type="text"  id="username" name="username" th:placeholder="#{login.username.enter}" class="login-form-text-size" autocomplete="username" required>
            <span style="color: #f44336" class="form-error"></span><br>
            <label th:text="#{login.password}"></label>
            <input type="password"  id="password"  name="password" th:placeholder="#{login.password.enter}"
                   class="login-form-text-size" autocomplete="current-password" required>

            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="lsRememberMe" id="rememberMe" name="rememberMe" >
                <label class="form-check-label" for="rememberMe" th:text="#{login.rememberme}">
<!--                    TODO pabaigti Remmeber me-->
                </label>
            </div>
            <button type="submit" class="login-button login-form-text-size" th:text="#{login.btn.login}" onclick="lsRememberMe()"></button>

        </div>
        <div class="cancle-container " style="background-color:#f1f1f1">
            <button type="button" class="cancelbtn login-form-text-size" th:text="#{login.cancel}"></button>

            <div class="register-forgot-container">
                <span class="psw-forgot"><a th:href="@{/}" th:text="#{login.forgotpasw}"></a></span>
                <span class="register-new-acc"><a th:href="@{/userregistrationform}"
                                                  th:text="#{login.register}"></a></span>

            </div>
        </div>
        <div class="login-announcment">
            <p><a th:text="#{login.info}" href="https://en.wikipedia.org/wiki/Password_strength"></a></p>

        </div>
    </form>

</div>
<footer th:replace="~{fragments/layout :: footer}">placeholder</footer>
<div th:replace="~{fragments/layout :: language-script}"></div>
<div class="center-infotext" th:text="#{footer.message}"></div>
<script>
    document.querySelector('.cancelbtn').addEventListener('click', function () {
                window.location.href = "/";
    });
// ===========================remmeberme checkbox===========================
    const rmCheck = document.getElementById("rememberMe"),
        usernameInput = document.getElementById("username");

    if (localStorage.checkbox && localStorage.checkbox !== "") {
        rmCheck.setAttribute("checked", "checked");
        usernameInput.value = localStorage.username;
    } else {
        rmCheck.removeAttribute("checked");
        usernameInput.value = "";
    }

    function lsRememberMe() {
        if (rmCheck.checked && usernameInput.value !== "") {
            localStorage.username = usernameInput.value;
            localStorage.checkbox = rmCheck.value;
        } else {
            localStorage.username = "";
            localStorage.checkbox = "";
        }
    }


</script>

</body>
</html>